{% extends 'base.html' %}

{% block content %}
<div class="form-center">
  <div class="form-card card" style="padding:0; background:transparent; box-shadow:none;">
    <div class="ticket-wrap">

      <!-- left: ticket image -->
      <div class="ticket-image" aria-hidden="true" role="img" aria-label="Raffle ticket">
        <img class="ticket" src="{{ url_for('static', filename='ticketimg.jpg') }}" alt="Raffle ticket template">
      </div>

      <!-- right: redesigned form -->
      <aside class="ticket-form" role="region" aria-label="Buy ticket form">
        <form method="post" action="{{ url_for('buy') }}" novalidate autocomplete="on" class="ticket-form-form">
          <h3 class="form-title">Buy Raffle Ticket</h3>

          <div class="form-body">
            <div class="field">
              <label for="name" class="field-label">Full name</label>
              <input id="name" name="name" type="text" required placeholder="Your full name" autocomplete="name" />
            </div>

            <div class="field">
              <label for="email" class="field-label">Email</label>
              <input id="email" name="email" type="email" required placeholder="you@example.com" autocomplete="email" />
            </div>

            <div class="field">
              <label for="phone" class="field-label">Phone</label>
              <input id="phone" name="phone" type="tel" required placeholder="080xxxxxxxx" pattern="[0-9+()\- \s]{7,}" inputmode="tel" autocomplete="tel" />
            </div>

            <div class="field">
              <label for="quantity" class="field-label">Quantity</label>
              <select id="quantity" name="quantity" required aria-required="true">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="5">5</option>
              </select>
            </div>
          </div>

          <div class="form-actions">
            <div class="price" aria-hidden="true">Price: ₦{{ price|default(200000) }}</div>
            <button type="submit" class="btn">Submit &amp; Continue</button>
          </div>
        </form>
      </aside>

    </div>
  </div>
</div>
{% endblock %}

<style>
/* ensure animated background is visible and cannot be overridden by other rules:
   use a fixed pseudo-element behind the page content */
html, body { height: 100%; margin:0; }
body { position: relative; overflow-x: hidden; }

/* animated background on a behind-the-scenes layer */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  background: linear-gradient(-45deg, #ff7a18 0%, #ff4e50 25%, #ff0000 50%, #ffb347 75%);
  background-size: 400% 400%;
  animation: gradientBG 8s ease infinite;
  will-change: background-position;
}

/* keyframes */
@keyframes gradientBG {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* container */
.ticket-wrap{
  display:flex;
  gap:28px;
  align-items:flex-start;
  max-width:980px;
  margin:0 auto;
  padding:12px;
  box-sizing:border-box;
}

/* image column */
.ticket-image{
  flex: 1 1 58%;
  display:flex;
  justify-content:center;
  align-items:center;
}
.ticket-image .ticket{
  width:100%;
  max-width:820px;
  height:auto;
  object-fit:contain;
  border-radius:6px;
  box-shadow:0 8px 24px rgba(0,0,0,0.12);
}

/* form column - switched to dark so white labels are readable */
.ticket-form{
  flex: 0 0 360px;
  background: #2f2a57;          /* dark panel */
  padding:22px;
  border-radius:10px;
  box-shadow:0 10px 30px rgba(0,0,0,0.08);
  box-sizing:border-box;
  color: #fff;                  /* default text white inside panel */
}

/* strong, visible title */
.form-title{
  margin:0 0 12px 0;
  font-weight:800;
  font-size:16px;
  color:#ffffff;                /* title white */
}

/* ENFORCE stacked layout: highest specificity and !important to override global styles */
.ticket-form .ticket-form-form { display:block !important; width:100% !important; }
.ticket-form .form-body { display:block !important; }
.ticket-form .field {
  display:block !important;
  width:100% !important;
  margin-bottom:14px !important;
  float:none !important;
  clear:both !important;
}

/* labels: bold and always above inputs — now white */
.ticket-form .field-label {
  display:block !important;
  font-weight:900 !important;
  color:#ffffff !important;    /* label text white */
  margin-bottom:8px !important;
  font-size:15px !important;
  letter-spacing:0.2px !important;
}

/* inputs/selects: full width stacked, no inline */
.ticket-form input[type="text"],
.ticket-form input[type="email"],
.ticket-form input[type="tel"],
.ticket-form select,
.ticket-form textarea {
  display:block !important;
  width:100% !important;
  max-width:100% !important;
  padding:12px 14px !important;
  border-radius:8px !important;
  border:1px solid rgba(255,255,255,0.12) !important;
  font-size:14px !important;
  box-sizing:border-box !important;
  background:#3b335f !important;   /* slightly lighter dark for inputs */
  color:#ffffff !important;        /* input text white */
  margin:0 !important;
  float:none !important;
}

/* placeholder / select text visibility */
.ticket-form input::placeholder,
.ticket-form textarea::placeholder {
  color: rgba(255,255,255,0.75) !important;
}
.ticket-form select {
  color: #ffffff !important;
  background-image: linear-gradient(45deg, transparent 50%, rgba(255,255,255,0.12) 50%),
                    linear-gradient(135deg, rgba(255,255,255,0.12) 50%, transparent 50%),
                    linear-gradient(to right, rgba(0,0,0,0.06), rgba(0,0,0,0.06));
  background-position: calc(100% - 18px) calc(1em + 2px), calc(100% - 13px) calc(1em + 2px), 100% 0;
  background-size: 5px 5px, 5px 5px, 2.5em 2.5em;
  background-repeat: no-repeat;
}

/* focus */
.ticket-form input:focus,
.ticket-form select:focus,
.ticket-form textarea:focus{
  outline:none !important;
  border-color:rgba(255,255,255,0.28) !important;
  box-shadow:0 6px 18px rgba(0,0,0,0.18) !important;
}

/* actions: button on its own line, price above or beside depending on width */
.form-actions{
  display:flex !important;
  flex-direction:column;
  gap:8px;
  align-items:flex-start;
  margin-top:8px;
}
.ticket-form .btn{
  background:#1e73be !important;
  color:#fff !important;
  padding:10px 18px !important;
  border-radius:8px !important;
  border:0 !important;
  font-weight:800 !important;
  cursor:pointer !important;
  width:100% !important; /* ensure button not inline */
}

/* price — make number white */
.price{ font-weight:700; color:#ffffff !important; font-size:15px; }

/* responsive: stack under image on small screens */
@media(max-width:900px){
  .ticket-wrap{ flex-direction:column; gap:18px; padding:12px; }
  .ticket-form{ width:100%; flex-basis:auto; order:2; }
  .ticket-image{ order:1 }
  .form-actions{ flex-direction:column; align-items:stretch; }
}
</style>
